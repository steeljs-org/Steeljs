!function(a,b){function c(){var b=a.console;if(Qb&&b){var c=arguments;if(h("^("+ic.slice(ic.indexOf(jc))+")").test(c[0])){for(var d=[],e=0,f=c.length;f>e;++e)d.push("arguments["+e+"]");new Function("console.log("+d.join(",")+")").apply(this,c)}}}function d(){}function e(a){return Ub.getElementById(a)}function f(a,b){return(b||Ub).getElementsByTagName(a)}function g(){return Date.now?Date.now():+new Date}function h(b,c){return new a.RegExp(b,c)}function i(a){for(var b=k(a),c=0,d=vc.length;d>c;++c)vc[c](b,a)}function j(a){vc.push(a)}function k(a){return function(b,c){return b in a?a[b]:c}}function l(a){var b=/^(?:([a-z]+:)?(\/{2,3})([0-9.\-a-z-]+)(?::(\d+))?)?(\/?[^?#]*)?(?:\?([^#]*))?(?:#(.*))?$/i,d=["url","protocol","slash","host","port","path","query","hash"],e=b.exec(a),f={};if(!e)return void c('Error:parseURL:"'+a+'" is wrong!');for(var g=0,h=d.length;h>g;g+=1)f[d[g]]=e[g]||"";return f.host&&(f.protocol=f.protocol||ac.protocol,f.port=f.port||80),f.port&&(f.port=Zb(f.port)),f.path=f.path.replace(/\/+/g,"/")||"/",f}function m(a){for(var b=a.split("&"),c={},d=0,e=b.length;e>d;++d)if(b[d]){var f=b[d].split("="),g=f[0],h=f[1]||"";c[g]=c[g]?[].concat(c[g],h):h}return c}function n(a){return null===a?"":Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function o(a){var b=[];for(var c in a)if("array"===n(a[c]))for(var d=0,e=a[c].length;e>d;++d)b.push(c+"="+a[c][d]);else b.push(c+"="+a[c]);return b.join("&")}function p(a){return"string"===n(a)}function q(a,b,c){if(p(b))a[b]=c;else for(var d in b)a[d]=b[d];return a}function r(a){return/^([a-z]+:)?\/\/\w+/i.test(a)}function s(a,b){a=a||".";var c,d=l(a);0!==d.path.indexOf("/")&&(a=s(ac.href,a),d=l(a)),d.protocol?c=d.protocol+"//"+d.host+(80===d.port?"":":"+d.port):(c=c=ac.origin||ac.toString().replace(/^([^\/]*\/\/[^\/]*)\/.*$/,"$1"),a=c+a);var e=c+"/",f=d.path;if(f=c+(0===f.indexOf("/")?"":"/")+f.slice(0,f.lastIndexOf("/")+1),r(b))return b;if("/"===b)return e;if("."===b||""===b)return a;if(0===b.indexOf("./"))return b=b.replace(/^\.\//,""),f+b;if(".."===b)return b=b.replace(/\.\./,""),f=t(f),f+b;if(0===b.indexOf("?"))return c+d.path+b;if(0===b.indexOf("&"))return c+d.path+"?"+o(q(m(d.query),m(b)));if(/^\/[^\/]+/.test(b))return c+b;for(;0===b.indexOf("../");){if(e===f){b=b.replace(/(\.\.\/)/g,""),f=e;break}b=b.replace(/^\.\.\//,""),f=t(f)}return f+b}function t(a){return a="/"===a.charAt(a.length-1)?a.slice(0,a.length-1):a,a.slice(0,a.lastIndexOf("/")+1)}function u(a,b,c){var d,e={};b=b||{};for(d in a)e[d]=a[d],null!=b[d]&&(c?a.hasOwnProperty(d)&&(e[d]=b[d]):e[d]=b[d]);return e}function v(a,b){var c=u({isEncodeQuery:!1,isEncodeHash:!1},b||{}),d={},e=l(a),f=m(e.query),g=m(e.hash);return d.setParam=function(a,b){return f[a]=b,this},d.getParam=function(a){return f[a]},d.setParams=function(a){for(var b in a)d.setParam(b,a[b]);return this},d.setHash=function(a,b){return g[a]=b,this},d.getHash=function(a){return g[a]},d.valueOf=d.toString=function(){var a=[],b=o(f,c.isEncodeQuery),d=o(g,c.isEncodeQuery);return e.protocol&&(a.push(e.protocol),a.push(e.slash)),""!=e.host&&(a.push(e.host),""!=e.port&&(a.push(":"),a.push(e.port))),a.push(e.path),""!=b&&a.push("?"+b),""!=d&&a.push("#"+d),a.join("")},d}function w(){return Ec+Dc++}function x(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;d>c;++c)if(b[c]===a)return c;return-1}function y(a){return _b.call(a,0,a.length)}function z(a){return Gc[a]||(Gc[a]=[])}function A(a,b){z(a).unshift(b)}function B(a,b){var c,d,e=z(a);b?(c=x(b,e))>-1&&(d=1):(c=0,d=e.length),d&&e.splice(c,d)}function C(a){var c=z(a),d=y(arguments);d=d.slice(1,d.length);for(var e=c.length-1;e>-1;e--)try{c[e]&&c[e].apply(b,d)}catch(f){a!=kc&&C(kc,["[error][notice]["+a+"]",f])}}function D(a){return"number"===n(a)}function E(a){return"object"===n(a)}function F(a){var b=/^[^:]+:\/\/[^\/]+\//,c=ac.href.match(b),d=a.match(b);return(c&&c[0])===(d&&d[0])}function G(a,c,d){for(var e={},f=0,g=d.length,h=0,i=a.length;i>h;++h){var j=a[h];if(j!==b&&null!==j){for(;g>f;++f)if(n(j)===d[f]){e[c[f]]=j,++f;break}if(f>=g)break}}return e}function H(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function I(a){a=a||ac.toString();var b=l(a);return b}function J(a){for(var b=E(a)?a:I(a),c=b.path,d=0,e=Ic.length;e>d;d++){var f,g=Ic[d];if(f=g.pathRegexp.exec(c)){for(var h,i,j,k=g.keys,l={},m=0,n=1,e=f.length;e>n;++n)i=k[n-1],h=i?i.name:m++,j=decodeURIComponent(f[n]),l[h]=j;return{config:g.config,param:l}}}}function K(a){S(Nc,M()+1),history.pushState(P(),b,a),N()}function L(a){history.replaceState(tc,b,a)}function M(){return Q(Nc,0)}function N(){uc={},tc=O()}function O(){return history.state||{}}function P(){return uc}function Q(a,c){return tc=O(),a in tc?tc[a]:c!==b?(R(a,c),c):void 0}function R(a,b){tc={};var c=history.state;if(c)for(var d in c)tc[d]=c[d];q(tc,a,b),L(ac.href)}function S(a,b){q(uc,a,b)}function T(a){return w()}function U(){var a=y(arguments);C.apply(b,["renderError"].concat(a))}function V(a,b){return a.getAttribute(b)}function W(a){var b=a;if("array"===n(a)){b=[];for(var c=a.length;c--;)b[c]=W(a[c])}else if("object"===n(a)){b={};for(var d in a)b[d]=W(a[d])}return b}function X(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Y(a,d){var e=y(arguments).slice(1);c.apply(b,["Error: render"].concat(e)),C.apply(b,[a.boxId+"error"].concat(e))}function Z(a){var b,c=_c[a.boxId],d=a.logic,e=null,f=null;if(a.logicReady=!1,a.logicFn=null,a.logicRunned=!1,d)if("function"===n(d))a.logicFn=d,$(a);else{var h=b=function(d){h===b&&(f=g(),C("logicTime",{startTime:e,logicTime:f-e||0,ctrlNS:c}),d&&(a.logicFn=d),$(a))};e=g(),Ab(d,h,function(){U(),Y(a,"logic",d)},c)}}function $(a){a.logicReady=!0,_(a)}function _(a){var b,c=a.boxId,d=e(c),f=$c[c],g=a.real_data||{};if(!a.logicRunned&&a.logicFn&&a.logicReady&&a.rendered){if(Qb)b=a.logicFn(d,g,f)||{};else try{b=a.logicFn(d,g,f)||{}}catch(h){Y(a,"runLogic",a.logic,h)}a.logicResult=b,a.logicRunned=!0}}function aa(a){a.logicRunned=!1;var d=a.logicResult;if(d){if(Qb)d.destroy&&d.destroy();else try{d.destroy&&d.destroy()}catch(e){c("Error: destroy logic error:",a.logic,e)}a.logicResult=b}}function ba(a,b){for(var c in a)if(b||a.hasOwnProperty(c))return!1;return!0}function ca(a){return Ub.createElement(a)}function da(a,b,c){return a.setAttribute(b,c)}function ea(a){var b=id+Oc+"-"+Pc++;return jd[Oc][b]=a||{},b}function fa(a){Oc=a,Pc=0,jd[a]={}}function ga(a){var b=a.match(h("^"+id+"(.*)-\\d+$"));return b?jd[b[1]][a]:void 0}function ha(a){delete jd[a]}function ia(a,b){if(a=a||{},"string"==typeof a){var c={};c[a]=!0,a=c}for(var d in a)ja(d,b)}function ja(a,b){var c=ad[a],d=$c[a],e=_c[a];b||(d&&(d._destroy(),delete $c[a]),e&&delete _c[a]),c&&(aa(c),Ha(c),ia(c.childrenid),ha(a),delete ad[a])}function ka(a){a.target=a.target||a.srcElement}function la(a,b,c){var d=" "+(a.className||"").replace(md,"  ")+" ";b=b||"",c=(b+" "+(c||"")).replace(md,"|").replace(/^\||\|$/,""),a.className=d.replace(h(" ("+c+") ","ig")," ")+" "+b}function ma(){return e(Tc||Rb&&Rb.id)}function na(){var a,b=Tc||Rb&&Rb.id;return fd&&(a=ad[b]&&ad[b].stageScrollId)?e(a):void 0}function oa(){wa(),pa()}function pa(){function a(a){var b=a.changedTouches[0];f=i,h=j,i=b.clientX,j=b.clientY}function c(a){Rc&&(a.preventDefault(),a.stopPropagation())}if(fd){var d,e,f,h,i,j,k,l;Mc(Vb,"touchstart",function(f){ka(f),c(f),Uc=!0,Wc=!1,Vc=g(),Yc=b,Zc=b,Qc&&f.preventDefault(),a(f),d=i,e=j,dc&&(k=ud.test(f.target.tagName),k||(Sc=!1,xa()))});Mc(Vb,"touchmove",function(b){a(b),Wc=!0,Xc=g(),Qc&&b.preventDefault()}),Mc(Vb,"touchend",function(a){ka(a),c(a),(l&&g()-l<300||Qc)&&a.preventDefault(),Yc=!0,Zc=l=g(),dc&&k&&ud.test(a.target.tagName)&&(Sc=!0,xa())}),Mc(Vb,"click",c)}}function qa(){if(dc&&Uc&&Wc){if(!Yc)return!0;if(g()-Zc<377)return!0}}function ra(a,b){var c=M(),d=va(a,c),f=e(a);da(f,"s-stage-sup","true"),d.subs[c]||ua(f,d,c);var g=d.subs[c];return d.last=d.curr,d.curr=c,Tc=g.id}function sa(a,c,d){function f(a){var b=a.target||a.srcElement;(b===t||b===s)&&g()}function g(){Qc&&(Qc=!1,ld(j,"webkitTransitionEnd",f),la(t,b,qd),la(s,b,qd),t.style.cssText="",s.style.cssText="display:none",xa(),h(),i())}function h(){var a=M();ta(k,a+1),ed||ta(k,0,a-1)}function i(){d&&d(p.id,o.id,r),Uc=!1,Xb(function(){Rc=!1},377)}Rc=!0;var j=e(a),k=va(a),l=k.subs,m=k.last,n=k.curr,o=l[m],p=l[n],q=n>m,r=!1,s=e(o.id),t=e(p.id);if(o!==p){r=p.inStage&&ed;var u=m>n&&qa();if(fd&&!u){var v=Vb.clientWidth,w=(Vb.clientHeight,kd(Ub.body,"backgroundColor"));Qc&&Qc();var x=q?v:-v/3;t.style.top=0,t.style.left=x+"px",q?(s.style.zIndex=99,t.style.zIndex=100,t.style.boxShadow="0 0 20px 0 rgba(0,0,0,0.40)",t.style.backgroundColor=w):(t.style.zIndex=99,s.style.zIndex=100,s.style.boxShadow="0 0 20px 0 rgba(0,0,0,0.40)",s.style.backgroundColor=w),t.style.display="",Sc=!1,Qc=g,xa(),Xb(function(){t.style.WebkitTransform="translate3d("+-x+"px, 0, 0)",s.style.WebkitTransform="translate3d("+(q?-v/3:v)+"px, 0, 0)",la(t,qd),la(s,qd),Mc(j,"webkitTransitionEnd",f)},199)}else fd&&u?(s.style.display="none",t.style.display="",h(),i()):Xb(function(){s.style.display="none",t.style.display="",h(),i()},366)}else t.style.display="",i();return p&&(p.inStage=!0),r}function ta(a,d,f){var g=a.subs,h=[];f=f===b?g.length-1:f;for(var i=d;f>=i;++i)h.push(g[i]),g[i]=b;Xb(function(){for(var a=0,b=h.length;b>a;++a)if(h[a]){var d=h[a].id;!function(a){Xb(function(){try{ia(a)}catch(b){c("Error: destroy subId("+a+") error in stage!")}finally{X(e(a))}})}(d)}},377)}function ua(a,b,c){var d=T(),e=ca("div");e.id=d,la(e,td),da(e,"s-stage-sub","true"),e.innHTML=gd,e.style.display="none",a.appendChild(e);var f=b.subs;return f[c]={id:d},c>=cd?(ta(b,0,c-cd+1),!0):void 0}function va(a,b){return nd[a]||(nd[a]={last:b,curr:b,subs:[]}),nd[a]}function wa(){if(dd){var a=[];fd&&(a.push("body{overflow:hidden;-webkit-overflow-scrolling : touch;}"),a.push("."+qd+"{-webkit-transition: -webkit-transform 0.4s ease-out;transition: transform 0.4s ease-out;}"),a.push("."+td+"{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;}"),a.push("."+rd+"{position:absolute;top:0;left:0;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-box-sizing : border-box;}")),a.push("."+sd+"{position:fixed!important;}");var b=ca("style");da(b,"type","text/css"),b.id=od,b.innerHTML=a.join(""),Wb.appendChild(b)}}function xa(){var a=[];Qc&&a.push("."+sd+"{position:absolute!important;}"),Sc&&a.push("."+rd+"{overflow-y: visible!important;}");var b=e(pd);b?b.innerHTML=a.join(""):(b=ca("style"),da(b,"type","text/css"),b.id=pd,b.innerHTML=a.join(""),Wb.appendChild(b))}function ya(a){for(var b,c=[],d=/<[a-z]+([^>]*?s-(child)[^>]*?)>/g;b=d.exec(a);){var e=b[1].replace(/\\\"/g,'"'),f=e.replace(/\"/g,"").replace(/ /g,"&"),g=m(f),i=T();g["s-id"]=i,g["s-all"]=e,c.push(g)}return d=h('(class="[^]*?'+rd+'[^]*?")'),(b=d.exec(a))&&c.push({"s-stage-scroll":!0,"s-all":b[1].replace(/\\\"/g,'"'),"s-id":T()}),c}function za(a,b){for(var c,d,e,f,g=ad[a],h={},i=0,j=b.length;j>i;i++)f=b[i],f["s-stage-scroll"]||(e=f["s-id"],h=ad[e]=ad[e]||{boxId:e,childrenid:{},s_childMap:{},needToTriggerChildren:!1,toDestroyChildrenid:null,forceRender:!1,lastRes:{},fromParent:!0},g.childrenid[e]=!0,h.parentId=a,h.tpl=f["s-tpl"],h.css=f["s-css"],h.data=f["s-data"],h.logic=f["s-logic"],(d=f["s-child"])&&(d="s-child"===d?"":d,d?(c=g.children&&g.children[d],g.s_childMap[d]=e):c=f["s-controller"],Sa(e,c)))}function Aa(){}function Ba(a){return E(a)?void(Aa.prototype=a):void c('Error:The method "steel.setExtTplData(obj)" used in your app need an object as the param.')}function Ca(a){C("rendered",{boxId:a,controller:_c[a]})}function Da(a){var c=a.boxId;if(a.dataReady&&a.tplReady&&!a.rendered){var d=a.tplFn,f=a.real_data;if(d&&f){var g=a.html;if(!g){fa(c);var h=null,i=new Aa,j=i;for(var k in f)j[k]=f[k];try{g=d(j)}catch(l){return U(l),void Y(a,"render",l)}a.html=g}if(a.cssReady){a.childrenid={};var m=ya(g);a.stageScrollId=b;for(var n=0,o=m.length;o>n;n++)h=m[n],h["s-stage-scroll"]?(a.stageScrollId=h["s-id"],g=g.replace(h["s-all"],h["s-all"]+" id="+h["s-id"])):g=g.replace(h["s-all"]," "+yd+"="+zd+" "+h["s-all"]+" id="+h["s-id"]);a.html=g;var p=e(c);aa(a),ia(a.toDestroyChildrenid,!1),p.innerHTML=g,a.rendered=!0,_(a),za(c,m),Ha(a,!0),Ca(c)}}}}function Ea(a){return a.substr(0,a.lastIndexOf("/")+1)}function Fa(a,b){if(b=b&&Ea(b),a)for(0===a.indexOf(".")&&(a=b?(b+a).replace(/\/\.\//,"/"):a.replace(/^\.\//,""));-1!==a.indexOf("../");)a=a.replace(/\w+\/\.\.\//,"");return a}function Ga(a){function b(){a.cssReady=!0,Da(a)}var c=null,d=null,f=a.css;if(!f)return void b();var h,i,j=a.boxId,k=_c[j],f=Fa(a.css,k);if(hd&&(h=e(j))&&(i=zb(f))&&la(h,i),Ad[f])return Ad[f][j]=!0,void b();Ad[f]={},Ad[f][j]=!0;var l=vd=function(){l===vd&&(d=g(),C("cssTime",{startTime:c,cssTime:d-c||0,ctrlNS:k}),b())};c=g(),Sd.css(f,l,function(){b(),Y(a,"css",f)})}function Ha(a,b){var c=a.boxId,d=_c[c],e=b&&Fa(a.css,d);for(var f in Ad)if(e!==f){var g=Ad[f];g[c]&&(delete g[c],!function(){for(var a in g)return;Sd.removeCss(f),delete Ad[f]}())}}function Ia(a){var b=a.children||{};for(var c in b)a.s_childMap[c]&&Sa(a.s_childMap[c],b[c])}function Ja(a){ia(a)}function Ka(a){var b,c=_c[a.boxId],d=null,e=null,f=a.tpl;if(a.tplFn=null,f){if("function"===n(f))return a.tplFn=f,void La(a);var h=b=function(f){h===b&&(e=g(),C("tplTime",{startTime:d,tplTime:e-d||0,ctrlNS:c}),a.tplFn=f,La(a))};d=g(),Ab(f,h,function(){U(),Y(a,"tpl",f)},c)}}function La(a){a.tplReady=!0,Da(a)}function Ma(a,b){if(a===b)return!0;if(!(a instanceof Object&&b instanceof Object))return!1;if(a.constructor!==b.constructor)return!1;for(var c in a)if(a.hasOwnProperty(c)){if(!b.hasOwnProperty(c))return!1;if(a[c]===b[c])continue;if("object"!=typeof a[c])return!1;if(!Ma(a[c],b[c]))return!1}for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0}function Na(a){if(a.needToTriggerChildren){var b={};if(a.childrenChanged)for(var c in a.s_childMap)b[a.s_childMap[c]]=!0;for(var d in a.childrenid)if(!b[d]){var e=$c[d];e&&Sa(d,e._controller)}}a.needToTriggerChildren=!1}function Oa(a,b){var c,d=a.data,e=_c[a.boxId],f=null,h=null;if(null===d||"null"===d)return void Pa({},a,b);if(d){var i=n(d);if("object"===i)Pa(d,a,b);else if("string"===i){if(c=ga(d))return void Pa(c,a,b);var j=wd=function(c){j===wd&&(h=g(),C("ajaxTime",{startTime:f,ajaxTime:h-f||0,ctrlNS:e}),Pa(c.data,a,b))};f=g(),Sd.get(d,j,function(b){a.real_data=null,U(b),Y(a,"data",d,b)})}}}function Pa(a,b,c){b.dataReady=!0,b.forceRender||c||!Ma(a,b.real_data)?(b.real_data=a,Da(b)):(Ca(b.boxId),Na(b))}function Qa(a,b,c){var d=n(c),e=a[b],f=a[b+"Fn"];return a.lastRes&&b in a.lastRes?a.lastRes[b]!==c:"data"===b?!0:"function"===d?!f||f.toString()!==c.toString():"children"===b?!Ma(e,c):e!==c}function Ra(a){function c(){g.needToTriggerChildren=!0,g.cssReady=!0,g.dataReady=!0,g.tplReady=!0,g.logicReady=!0,g.rendered=!0,g.logicRunned=!1;var a,b;g.lastRes={},i={};for(var c=0,d=Bd.length;d>c;++c)a=Bd[c],"data"!==a&&(g.lastRes[a]=g[a]),h&&(b=V(h,"s-"+a),b?Qa(g,a,b)&&(i[a]=!0,g[a]=b):a in g&&delete g[a]),g.fromParent&&g[a]&&(i[a]=!0);g.fromParent=!1}function d(a){if(a){if(f)return}else f=!0;g.lastRes=null;var b=i.tpl,c=i.data,d=i.css,e=i.logic;g.childrenChanged=i.children,i={},b||c?(g.rendered=!1,g.html="",g.toDestroyChildrenid=W(g.childrenid)):Na(g),b&&(g.tplReady=!1),c&&(g.dataReady=!1),d&&(g.cssReady=!1),e&&(g.logicReady=!1),!g.tpl&&delete g.tplFn,!g.logic&&delete g.logicFn,b&&Ka(g),c&&Oa(g,b),d&&Ga(g),e&&Z(g),g.childrenChanged&&Ia(g)}var f,g=ad[a]=ad[a]||{boxId:a,childrenid:{},s_childMap:{},needToTriggerChildren:!1,toDestroyChildrenid:null,forceRender:!1},h=e(a),i={},j={id:a,setForceRender:function(a){g.forceRender=a},get:function(a){return g&&g[a]},set:function(b,c,e){if(a){if("object"===n(b)){e=c;for(var f in b)j.set(f,b[f]);return void(e&&d())}i[b]=Qa(g,b,c),g[b]=c,i[b]&&e&&d()}},on:function(b,c){Cd.indexOf(b)>-1&&A(a+b,c)},off:function(b,c){Cd.indexOf(b)>-1&&c&&B(a+b,c)},refresh:function(a){g.needToTriggerChildren=!0,a&&(g.real_data=b),i.data=!0,d()},deal:d,_destroy:function(){for(var c=Cd.length-1;c>=0;c--)B(a+Cd[c]);a=j._controller=g=h=b}};return c(),j}function Sa(a,c){function d(){return Dd[j]=b,p(c)?(_c[j]=c,l=Dd[j]=function(a){l===Dd[j]&&a&&(r=g(),C("ctrlTime",{startTime:q,ctrlTime:r-q||0,ctrlNS:m}),Dd[j]=b,f(a))},q=g(),void Ab(c,l,U)):void f()}function f(b){if(c=b||c,a!==Ub.body){for(var d,e=a.parentNode;e&&e!==Vb&&(!e.id||!(d=ad[e.id]));)e=e.parentNode;d&&(d.childrenid[j]=!0)}if(k=$c[j]){if(k._controller===c)return k.refresh(),void h(!1);k._controller&&k._destroy()}$c[j]=k=Ra(j),c&&(k._controller=c,c(k,Ed)),k.deal(!0),h(!0)}function h(a){var b=Q(Md);a&&C(j+"init",b),C(j+"enter",b,a)}var i,j,k,l,m,n,o,q=null,r=null,s=Ya().type,t=a===Rb;"string"==typeof a?(i=a,a=e(i)):(i=a.id,i||(a.id=i=T())),j=i,dd&&t?(j=ra(i,s),n=sa(i,"",function(a,b,c){a!==b&&(o=b,C(b+"leave",function(a){a&&R(Md,a)}),c&&-1===s.indexOf("refresh")&&h(!1))}),C("stageChange",e(j),n),Fd[j]=!0,!n||s.indexOf("refresh")>-1?d():Ca(j)):(t&&C("stageChange",e(j),!1),Fd[j]=!0,d())}function Ta(){Ld=M(),Mc(Ub,"click",function(a){var b=a.target;Gd=1;var c=Ua(b),d=c&&c.href;!d||0===d.indexOf("javascript:")||"_blank"===c.getAttribute("target")||a.metaKey||a.ctrlKey||a.altKey||a.shiftKey||(H(a),_a(d))});var b=0;Mc(a,"popstate",function(){C("popstate");var a=M();Kc=Ld>a?"refresh"===Kc?"back-refresh":"back":"forward",Ld=a;var c=ac.href;(0!==b||Lc!==c)&&Va(c)}),Xb(function(){b=1},1e3)}function Ua(a){return a&&Kd>Gd?(Gd++,a.tagName&&"a"===a.tagName.toLowerCase()?a:Ua(a.parentNode)):void 0}function Va(a){sc=Lc,R(Nd,sc),Lc=a,Ld=M(),Ya(!0).config?Wa():ac.reload()}function Wa(){C("routerChange",Ya())}function Xa(){Jd?(Jd=b,R(Md,Id)):cb(),db()}function Ya(a){return(a||!Hd)&&db(),Hd}function Za(a,b){_a(a,b)}function $a(a,b){_a(a,!0,b)}function _a(a,b,c){E(b)&&(c=b,b=!1),Id=c,a=s(Ya().url,a||""),Jc&&F(a)?(b?(Kc="replace",L(a)):Lc!==a?(Kc="new",K(a)):Kc="refresh",Jd=!0,Xa(),Va(a)):b?ac.replace(a):ac.href=a}function ab(){Jc?_a(Ya().url):ac.reload()}function bb(a,b,c,d){var e=G(arguments,["url","num","data","refresh"],["string","number","object","boolean"]);return a=e.url,b=e.num,c=e.data,d=e.refresh,Id=c,b=D(b)&&b>0?b:1,Jc?M()<b?(a&&ac.replace(s(Ya().url,a)),!1):(A("popstate",function f(){B("popstate",f);var b=Ya().url;a=a&&s(b,a),a&&a!==b?F(a)?(Kc="refresh",L(a),db()):ac.replace(a):d&&(Kc="refresh")}),Jd=!0,history.go(-b),!0):(a?ac.href=s(Ya().url,a):history.go(-b),!0)}function cb(){Jc&&R(Md,b)}function db(){var a=Hd,b=0;Jc&&(b=M()),Hd=I();var c=Hd.path;Hd.path=Qb?c.replace(/\.(jade)$/g,""):c,Hd.search=Hd.query,Hd.query=m(Hd.query),Hd.type=Kc,Hd.prev=sc||Q(Nd),Hd.transferData=Q(Md),Hd.state=O(),Hd.index=b,Hd.lastIndex=a?a.index:b;var d=J(Hd);return d&&(Hd.config=d.config,Hd.param=d.param),Hd}function eb(a,b){switch(b){case"js":path=mc;break;case"css":path=nc;break;case"ajax":path=oc}var c=Ya();if("ajax"===b){var d={},e=c.query;a=a.replace(/\{(.*?)\}/g,function(a,b){return e[b]&&(d[b]=e[b]),""}),a=v(a).setParams(d).toString()}var f=fb(path,a,pc,c.url.replace(/\/([^\/]+)$/,"/"));return"js"!==b&&"css"!==b||h("(\\."+b+")$").test(a)||(f+="."+b),f}function fb(a,b,c,d){return s(a||c||d,b)}function gb(a,c){Xb(function(){a.apply(b,c)})}function hb(a){Cc[a]=[]}function ib(a,b,c){Cc[a].push([b,c])}function jb(a,b,c){b=b?0:1;for(var d=0,e=Cc[a].length;e>d;d++){var f=Cc[a][d];try{f[b](c,a)}catch(g){gb(function(b){b[1](c,a)},[f])}}}function kb(a){a in Cc&&delete Cc[a]}function lb(b,e,f){function g(){var a=!1;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){a=!1}}}return a}var h={charset:"UTF-8",timeout:3e4,args:{},onComplete:e||d,onTimeout:f||d,uniqueID:null,onFail:f||d,method:"get",asynchronous:!0,header:{},isEncode:!1,responseType:"json"};if(""==b)return void c("Error: ajax need url in parameters object");var i,j=g(),k=function(){if(4==j.readyState){Yb(i);var c="";if("xml"===h.responseType)c=j.responseXML;else if("text"===h.responseType)c=j.responseText;else try{c=j.responseText&&"string"==typeof j.responseText?a.eval("("+j.responseText+")"):{}}catch(d){c=b+"return error : data error"}200==j.status?null!=h.onComplete&&h.onComplete(c):0==j.status||null!=h.onFail&&h.onFail(c,j)}};if(j.onreadystatechange=k,h.header["Content-Type"]||(h.header["Content-Type"]="application/x-www-form-urlencoded"),h.header["X-Requested-With"]||(h.header["X-Requested-With"]="XMLHttpRequest"),"get"==h.method.toLocaleLowerCase()){var b=v(b,{isEncodeQuery:h.isEncode});b.setParams(h.args),b.setParam("__rnd",(new Date).valueOf()),j.open(h.method,b.toString(),h.asynchronous);try{for(var l in h.header)j.setRequestHeader(l,h.header[l])}catch(m){}j.send("")}else{j.open(h.method,b,h.asynchronous);try{for(var l in h.header)j.setRequestHeader(l,h.header[l])}catch(m){}j.send(o(h.args,h.isEncode))}return h.timeout&&(i=Xb(function(){try{j.abort(),h.onTimeout({},j),callback(!1,{},j)}catch(a){}},h.timeout)),j}function mb(a,b){return lb(a,function(c,d){nb(a,c,d,b)},function(a){b(!1,a)})}function nb(a,b,d,e){qc?qc(b,d,e):b&&"100000"==b.code?e(!0,b):(c('Error: response data url("'+a+'") : The api error code is '+(b&&b.code)+". The error reason is "+(b&&b.msg)),e(!1,b,d))}function ob(){for(var a=f("link"),b=a.length-1;b>=0;b--){var c=a[b].getAttribute("s-preload-css");if(c){c=c.replace(/&amp;/gi,"&");for(var d=c.split("|"),e=d.length-1;e>=0;e--)qb(d[e],"css",!0,!0)}}for(var g=f("script"),b=g.length-1;b>=0;b--){var h=g[b],i=h.getAttribute("s-preload-data"),j=h.getAttribute("s-preload-data-property");i&&(i=i.replace(/&amp;/gi,"&"),pb(i,j))}}function pb(b,c){function d(){if(g&&!g.complete){if(c in a){g.complete=!0;var h=a[c];"error"===h?e(!1,null):nb(b,h,{},function(a,b){e(a,b)})}else f>0?Xb(d,19):(g.complete=!0,e(!1,null));f--}}function e(a,b){var c=g[a?"onsuccess":"onfail"];g[a?"success":"fail"]=b;for(var d=0,e=c.length;e>d;d++)c[d]&&c[d](b)}qb(b,"ajax",!1);var f=250,g=Qd[b];d()}function qb(a,b,c,d,e){Qd[a]={type:b,complete:c,success:d,fail:e,onsuccess:[],onfail:[]}}function rb(a){return Qd[a]}function sb(a,b){var c,d,e={},f={charset:"UTF-8",timeout:3e4,args:{},isEncode:!1},g=w();return c=e[g],null==c||lc||(X(c),c=null),null==c&&(c=e[g]=ca("script")),c.charset=f.charset,c.id="scriptRequest_script_"+g,c.type="text/javascript",null!=b&&(lc?c.onreadystatechange=function(){if("loaded"==c.readyState.toLowerCase()||"complete"==c.readyState.toLowerCase()){try{Yb(d),Wb.removeChild(c),c.onreadystatechange=null}catch(a){}b(!0)}}:c.onload=function(){try{Yb(d),X(c)}catch(a){}b(!0)}),c.src=v(a,{isEncodeQuery:f.isEncode}).setParams(f.args).toString(),Wb.appendChild(c),f.timeout>0&&(d=Xb(function(){try{Wb.removeChild(c)}catch(a){}b(!1)},f.timeout)),c}function tb(a){Pd||((Pd=ca("div")).style.cssText="position:absolute;top:-9999px;",Wb.appendChild(Pd)),Pd.appendChild(a)}function ub(a){Pd&&Pd.removeChild(a)}function vb(b,d,e){function f(){var b=42===Zb(a.getComputedStyle?getComputedStyle(g,null).height:g.currentStyle&&g.currentStyle.height);return b&&(g&&ub(g),d(!0)),b}var g=null,h=(w(),null),i=500;if(g=ca("div"),da(g,"id",e),tb(g),!f()){var j=ca("link");da(j,"rel","Stylesheet"),da(j,"type","text/css"),da(j,"charset","utf-8"),da(j,"id","link_"+e),da(j,"href",b),Wb.appendChild(j),h=function(){f()||(--i>0?Xb(h,10):(c('Error: css("'+b+'" timeout!'),ub(g),d(!1)))},Xb(h,50)}}function wb(a){var b=e("link_"+a);return b?(X(b),!0):!1}function xb(a,d,e,f){var g=rb(d);c("Info:",d,!!g),"init"===Ya().type&&g?g.complete?g.success?e&&e.apply(b,[].concat(g.success)):f&&f.apply(b,[].concat(g.fail)):(g.onsuccess.push(e),g.onfail.push(f)):yb(a,d,e,f)}function yb(a,b,c,d){function e(a,b){jb(h,a,b),kb(h)}var f;"css"===a&&(f=zb(b));var g=r(b),h=b;if(g||(h=eb(b,a),"ajax"!==a&&rc&&(h+="?version="+rc)),Cc[h])ib(h,c,d);else switch(hb(h),ib(h,c,d),a){case"js":sb(h,e);break;case"css":vb(h,e,f);break;case"ajax":mb(h,e)}}function zb(a){return a&&Rd+a.replace(/(\.css)$/i,"").replace(/\//g,"_")}function Ab(c,d,e,f,g){function h(){if(c.length<=k)if(l)e();else{var f=[];(g===b||g===!0)&&(f=Cb(c)),d&&d.apply(a,f)}}function i(a){zc[a]?(k++,h()):A(Bc,function b(c){a===c&&(B(Bc,b),k++,h())})}var j,k=0,l=0,m=f&&Ea(f);c=[].concat(c);for(var n=0,o=c.length;o>n;n++)j=c[n]=Fa(c[n],m),yc[j]?i(j):!function(a){Sd.js(a,function(){r(a)&&(zc[a]=!0,yc[a]=!0),i(a)},function(){l++})}(j)}function Bb(b){function d(d){if("array"===n(d)){var f=y(arguments);return f[3]=f[3]||b,Ab.apply(a,f)}return d=Fa(d,e),zc[d]?(d in Ac||Cb(d),Ac[d]):void c('Error: ns("'+d+'") is undefined!')}var e=Ea(b);return d}function Cb(d,e){d=[].concat(d);var f,g,h,i,j,k=[];for(f=0,g=d.length;g>f;f++)h=Fa(d[f],e),i=xc[h],i?(Ac[h]||(wc[h]&&Cb(wc[h],Ea(h)),j={exports:{}},Ac[h]=i.apply(a,[Bb(h),j.exports,j])||j.exports),k.push(Ac[h])):(c('Warning: ns("'+h+'") has not constructor!'),k.push(b));return k}function Db(a,b,d){function e(){zc[a]=!0,C(Bc,a),c('Debug: define ns("'+a+'")')}zc[a]||(yc[a]=!0,wc[a]=d?b||[]:[],xc[a]=d||b,b=wc[a],b.length>0?Ab(b,e,function(){c('Error: ns("'+a+'") deps loaded error!',"")},a,!1):e())}function Eb(){ob()}function Fb(){oa()}function Gb(a,b){Hc=a("router",Hc),Jc=bc?a("singlePage",Jc):!1}function Hb(a){return a.replace(/([=!:$\/()])/g,"\\$1")}function Ib(a,b){return a.keys=b,a}function Jb(a){return a.sensitive?"":"i"}function Kb(a,b){var c=a.source.match(/\((?!\?)/g);if(c)for(var d=0;d<c.length;d++)b.push({name:d,delimiter:null,optional:!1,repeat:!1});return Ib(a,b)}function Lb(a,b,c){for(var d=[],e=0;e<a.length;e++)d.push(Nb(a[e],b,c).source);var f=h("(?:"+d.join("|")+")",Jb(c));return Ib(f,b)}function Mb(a,b){function c(a,c,e,f,g,h,i,j){if(c)return c;if(j)return"\\"+j;var k="+"===i||"*"===i,l="?"===i||"*"===i;return b.push({name:f||d++,delimiter:e||"/",optional:l,repeat:k}),e=e?"\\"+e:"",g=Hb(g||h||"[^"+(e||"\\/")+"]+?"),k&&(g=g+"(?:"+e+g+")*"),l?"(?:"+e+"("+g+"))?":e+"("+g+")"}var d=0;return a.replace(Wd,c)}function Nb(b,c,d){if(c=c||[],Vd(c)?d||(d={}):(d=c,c=[]),b instanceof a.RegExp)return Kb(b,c,d);if(Vd(b))return Lb(b,c,d);var e=d.strict,f=d.end!==!1,g=Mb(b,c),i="/"===b.charAt(b.length-1);return e||(g=(i?g.slice(0,-2):g)+"(?:\\/(?=$))?"),g+=f?"$":e&&i?"":"(?=\\/|$)",Ib(h("^"+g,Jb(d)),c)}function Ob(b,c){var d,e,f;if("object"!=typeof b||b instanceof a.RegExp){var g=[],h=Nb(b,g);return Ic.push({pathRegexp:h,config:c,keys:g})}f=[];for(d in b)e=b[d],f.push(Ob(d,e));return f}function Pb(){for(var a=0,b=Hc.length;b>a;a++){var c=Hc[a];Ob(c[0],c)}cb(),Ya(!0).config&&Wa(),bc&&Jc&&Ta()}var Qb,Rb,Sb=a.steel||{v:.1,t:g()},Tb=navigator.userAgent,Ub=a.document,Vb=Ub.documentElement,Wb=Ub.head||f("head")[0]||Vb,Xb=a.setTimeout,Yb=a.clearTimeout,Zb=a.parseInt,$b=a.parseFloat,_b=[].slice,ac=a.location,bc=(a.decodeURI,Object.prototype.toString,!!history.pushState),cc=Tb.match(/Web[kK]it[\/]{0,1}([\d.]+)/),dc=(cc&&$b(cc[1]),Tb.match(/(iPhone\sOS)\s([\d_]+)/)),ec=dc&&$b(dc[2].replace(/_/g,".")),fc=Tb.match(/(Android);?[\s\/]+([\d.]+)?/),gc=fc&&$b(fc[2]),hc=Ub.addEventListener,ic="Debug|Info|Warn|Error|Fatal",jc="Info",kc="logNotice",lc=/msie (\d+\.\d+)/i.test(Tb)?Ub.documentMode||+h.$1:0;bc&&!function(){var a=history.state;history.replaceState(1,b),bc=1===history.state,history.replaceState(a,b)}();var mc,nc,oc,pc,qc,rc,sc,tc,uc,vc=[],wc={},xc={},yc={},zc={},Ac={},Bc="-require-defined",Cc={},Dc=1,Ec="SL_"+g(),Fc="_N",Gc=Sb[Fc]=Sb[Fc]||{},Hc=[],Ic=[],Jc=!1,Kc="init",Lc=ac.toString(),Mc=hc?function(a,c,d,e){a.addEventListener(c,d,e===b?!1:e)}:function(a,b,c){a.attachEvent("on"+b,c)},Nc="--steel-stateIndex";N(),A("popstate",N);var Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c={},_c={},ad={},bd=!1,cd=10,dd=!1,ed=!1,fd=!1,gd="",hd=!1,id="#sdata-",jd={},kd=a.getComputedStyle?function(a,b){return getComputedStyle(a,"")[b]}:function(a,b){return a.currentStyle&&a.currentStyle[b]},ld=hc?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},md=/ +/g,nd={},od="steel-style-main",pd="steel-style-rewrite",qd="steel-stage-transform",rd="steel-render-stage-scroll",sd="steel-render-stage-fixed",td="steel-stage-sub",ud=/input|textarea/i;Aa.prototype.constructor=Aa,Aa.prototype.steel_s_data=ea;var vd,wd,xd,yd="s-module",zd="ismodule",Ad={},Bd=["css","tpl","data","logic"],Cd=["init","enter","leave","error","destroy"],Dd={},Ed={},Fd={};A("stageChange",function(){Fd={}}),A("rendered",function(a){delete Fd[a.boxId],xd&&Yb(xd),ba(Fd)&&(C("allRendered"),C("allDomReady"))});var Gd,Hd,Id,Jd,Kd=5,Ld=b,Md="-steel-router-transferData",Nd="-steel-router-prevHref",Od={fix:function(a){return s(Ya().url,a)},get:Ya,push:Za,replace:$a,set:_a,back:bb,refresh:ab,clearTransferData:cb};A("popstate",Xa);var Pd,Qd={},Rd="S_CSS_",Sd={js:function(a,b,c){xb("js",a,b,c)},css:function(a,b,c){xb("css",a,b,c)},get:function(a,b,c){xb("ajax",a,b,c)},removeCss:function(a){return wb(zb(a))}},Td="/";j(function(a){mc=a("jsPath",mc),nc=a("cssPath",nc),oc=a("ajaxPath",oc),pc=a("basePath",Td),qc=a("defApiRule",qc),rc=a("version",rc)});var Ud={getBox:ma,getScrollBox:na};j(function(a){bc&&(bd=a("dataCache",bd),(dc&&ec>=8&&cc||fc&&gc>=4.4&&cc)&&(dd=a("stage",dd),dd&&(ed=a("stageCache",ed),fd=a("stageChange",fd),gd=a("stageDefaultHTML",gd),cd=a("stageMaxLength",cd)))),hd=a("useCssPrefix",hd)}),j(Gb);var Vd=Array.isArray?function(a){return Array.isArray(a)}:function(a){return"array"===n(a)},Wd=h(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g");j(function(a,b){Qb=a("debug",Qb),jc=a("logLevel",jc),b.logLevel||Qb||(jc="Error"),Rb=a("mainBox",Rb),p(Rb)&&(Rb=e(Rb))}),Sb.d=Db,Sb.res=Sd,Sb.run=Sa,Sb.stage=Ud,Sb.router=Od,Sb.on=A,Sb.off=B,Sb.setExtTplData=Ba,Sb.require=Ab,Sb.config=i,Sb.boot=function(a){Sb.isDebug=Qb,Ab(a,function(){Eb(),Fb(),Pb()})},Sb._destroyByNode=function(a){var b,c=a&&a.id;c&&(b=ad[c])&&(aa(b),Ja(b.toDestroyChildrenid))},A("routerChange",function(a){var b=a.config,d=b[1];Sa(Rb,d),c("Info: routerChange",Rb,d,a.type)}),a.steel=Sb}(window);